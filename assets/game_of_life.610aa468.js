import{r as e,R as t}from"./vendor.a180f0c7.js";let n,i=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let r=null;function o(e,t){return i.decode((null!==r&&r.buffer===n.memory.buffer||(r=new Uint8Array(n.memory.buffer)),r).subarray(e,e+t))}class a{static __wrap(e){const t=Object.create(a.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_universe_free(e)}tick(){n.universe_tick(this.ptr)}static new(){var e=n.universe_new();return a.__wrap(e)}width(){return n.universe_width(this.ptr)>>>0}height(){return n.universe_height(this.ptr)>>>0}cells(){return n.universe_cells(this.ptr)}toggle_cell(e,t){n.universe_toggle_cell(this.ptr,e,t)}}async function s(e){void 0===e&&(e=new URL("/assets/rsw~game-of-life_bg.f3d93eec.wasm",window.location));const t={};var i;t.wbg={},t.wbg.__wbg_random_727732de4695ec15="function"==typeof Math.random?Math.random:(i="Math.random",()=>{throw new Error(`${i} is not defined`)}),t.wbg.__wbindgen_throw=function(e,t){throw new Error(o(e,t))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:a}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const i=await e.arrayBuffer();return await WebAssembly.instantiate(i,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return n=r.exports,s.__wbindgen_wasm_module=a,n}function c(){return e.exports.useEffect((()=>{!async function(e,t){const n=document.getElementById(e),i=document.getElementById(t);let r=null;const o=await s(),c=a.new(),l=c.width(),u=c.height();n.width=8*l+1,n.height=8*u+1;const h=n.getContext("2d");(function({ctx:e,width:t,height:n}){e.beginPath(),e.strokeStyle="#D2D2D2";for(let i=0;i<=t;i++)e.moveTo(8*i+1,0),e.lineTo(8*i+1,8*n+1);for(let i=0;i<=n;i++)e.moveTo(0,8*i+1),e.lineTo(8*t+1,8*i+1);e.stroke()})({ctx:h,width:l,height:u}),f({universe:c,ctx:h,width:l,height:u,memory:o.memory});const m=()=>{c.tick(),f({universe:c,ctx:h,width:l,height:u,memory:o.memory}),r=requestAnimationFrame(m)},w=()=>null===r,d=()=>{i.textContent="⏸",m()},g=()=>{i.textContent="▶",cancelAnimationFrame(r),r=null};i.addEventListener("click",(()=>{w()?d():g()})),n.addEventListener("click",(e=>{const t=n.getBoundingClientRect(),i=n.width/t.width,r=n.height/t.height,a=(e.clientX-t.left)*i,s=(e.clientY-t.top)*r,m=Math.min(Math.floor(s/8),u-1),w=Math.min(Math.floor(a/8),l-1);c.toggle_cell(m,w),f({universe:c,ctx:h,width:l,height:u,memory:o.memory})}))}("game-of-life-canvas","play-pause-btn")}),[]),t.createElement("div",{className:"game-of-life-page"},t.createElement("canvas",{id:"game-of-life-canvas"}),t.createElement("div",{className:"op"},t.createElement("button",{id:"play-pause-btn",title:"play-pause"},"▶")))}function l({row:e,width:t,column:n}){return e*t+n}function u(e,t){const n=1<<e%8;return(t[Math.floor(e/8)]&n)===n}function f({universe:e,ctx:t,memory:n,width:i,height:r}){const o=e.cells(),a=new Uint8Array(n.buffer,o,i*r/8);t.beginPath();for(let s=0;s<r;s++)for(let e=0;e<i;e++){const n=l({row:s,column:e,width:i});t.fillStyle=u(n,a)?"#000000":"#FFFFFF",t.fillRect(8*e+1,8*s+1,7,7)}t.stroke()}export{c as default};
