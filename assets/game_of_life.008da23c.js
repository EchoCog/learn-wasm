import{r as C,R as d}from"./vendor.5d2cbba9.js";let i,_=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let w=null;function O(){return(w===null||w.buffer!==i.memory.buffer)&&(w=new Uint8Array(i.memory.buffer)),w}function D(t,e){return _.decode(O().subarray(t,t+e))}function B(t){return()=>{throw new Error(`${t} is not defined`)}}class y{static __wrap(e){const n=Object.create(y.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_universe_free(e)}tick(){i.universe_tick(this.ptr)}static new(){var e=i.universe_new();return y.__wrap(e)}width(){var e=i.universe_width(this.ptr);return e>>>0}height(){var e=i.universe_height(this.ptr);return e>>>0}cells(){var e=i.universe_cells(this.ptr);return e}toggle_cell(e,n){i.universe_toggle_cell(this.ptr,e,n)}}async function S(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}async function p(t){typeof t=="undefined"&&(t=new URL("/assets/game_of_life_bg.30dcf3cc.wasm",self.location));const e={};e.wbg={},e.wbg.__wbg_random_7b8246250fd79f60=typeof Math.random=="function"?Math.random:B("Math.random"),e.wbg.__wbindgen_throw=function(c,f){throw new Error(D(c,f))},(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await S(await t,e);return i=n.exports,p.__wbindgen_wasm_module=r,i}const o=7,T="#D2D2D2",W="#FFFFFF",P="#000000";function N(){return C.exports.useEffect(()=>{q("game-of-life-canvas","play-pause-btn")},[]),d.createElement("div",{className:"game-of-life-page"},d.createElement("canvas",{id:"game-of-life-canvas"}),d.createElement("div",{className:"op"},d.createElement("button",{id:"play-pause-btn",title:"play-pause"},"\u25B6")))}function U({ctx:t,width:e,height:n}){t.beginPath(),t.strokeStyle=T;for(let r=0;r<=e;r++)t.moveTo(r*(o+1)+1,0),t.lineTo(r*(o+1)+1,(o+1)*n+1);for(let r=0;r<=n;r++)t.moveTo(0,r*(o+1)+1),t.lineTo((o+1)*e+1,r*(o+1)+1);t.stroke()}function G({row:t,width:e,column:n}){return t*e+n}function j(t,e){const n=Math.floor(t/8),r=1<<t%8;return(e[n]&r)===r}function g({universe:t,ctx:e,memory:n,width:r,height:c}){const f=t.cells(),l=new Uint8Array(n.buffer,f,r*c/8);e.beginPath();for(let a=0;a<c;a++)for(let s=0;s<r;s++){const u=G({row:a,column:s,width:r});e.fillStyle=j(u,l)?P:W,e.fillRect(s*(o+1)+1,a*(o+1)+1,o,o)}e.stroke()}async function q(t,e){const n=document.getElementById(t),r=document.getElementById(e);let c=null;const f=await p(),l=y.new(),a=l.width(),s=l.height();n.width=(o+1)*a+1,n.height=(o+1)*s+1;const u=n.getContext("2d");U({ctx:u,width:a,height:s}),g({universe:l,ctx:u,width:a,height:s,memory:f.memory});const h=()=>{l.tick(),g({universe:l,ctx:u,width:a,height:s,memory:f.memory}),c=requestAnimationFrame(h)},v=()=>c===null,E=()=>{r.textContent="\u23F8",h()},R=()=>{r.textContent="\u25B6",cancelAnimationFrame(c),c=null};r.addEventListener("click",()=>{v()?E():R()}),n.addEventListener("click",b=>{const m=n.getBoundingClientRect(),L=n.width/m.width,A=n.height/m.height,M=(b.clientX-m.left)*L,F=(b.clientY-m.top)*A,I=Math.min(Math.floor(F/(o+1)),s-1),k=Math.min(Math.floor(M/(o+1)),a-1);l.toggle_cell(I,k),g({universe:l,ctx:u,width:a,height:s,memory:f.memory})})}export{N as default};
